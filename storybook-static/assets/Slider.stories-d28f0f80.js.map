{"version":3,"file":"Slider.stories-d28f0f80.js","sources":["../../src/components/Slider/Slider.vue"],"sourcesContent":["<template>\r\n  <div class=\"unnnic-slider\" :style=\"cssVars\">\r\n    <div class=\"unnnic-slider__content\">\r\n      <unnnicTooltip\r\n        ref=\"tooltip\"\r\n        class=\"unnnic-slider__content__tooltip\"\r\n        :text=\"sliderVal.toString()\"\r\n        :force-open=\"true\"\r\n        :enabled=\"showTooltip\"\r\n        side=\"top\"\r\n      >\r\n        <input\r\n          ref=\"input\"\r\n          class=\"unnnic-slider__content__range-input\"\r\n          v-model=\"sliderVal\"\r\n          type=\"range\"\r\n          :min=\"minValue\"\r\n          :max=\"maxValue\"\r\n          :step=\"step\"\r\n          @change=\"handleValueChange\"\r\n          @mouseover=\"showTooltip = true\"\r\n          @mouseleave=\"showTooltip = false\"\r\n        />\r\n      </unnnicTooltip>\r\n\r\n      <div class=\"unnnic-slider__content__labels\">\r\n        <div class=\"unnnic-slider__content__labels__min\">{{ minLabel }}</div>\r\n        <div class=\"unnnic-slider__content__labels__max\">{{ maxLabel }}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div ref=\"value-input\" class=\"value-input\" contenteditable=\"true\" @input=\"handleInput\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport unnnicTooltip from '../ToolTip/ToolTip.vue';\r\n\r\nexport default {\r\n  name: 'unnnic-slider',\r\n  components: {\r\n    unnnicTooltip,\r\n  },\r\n  props: {\r\n    initialValue: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    minValue: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    maxValue: {\r\n      type: Number,\r\n      default: 5,\r\n    },\r\n    step: {\r\n      type: Number,\r\n      default: 1,\r\n    },\r\n    minLabel: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    maxLabel: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      showTooltip: false,\r\n      sliderVal: this.initialValue,\r\n      tooltipOffset: 0,\r\n      sliderWidth: 0,\r\n      labelWidth: 0,\r\n    };\r\n  },\r\n  created() {\r\n    window.addEventListener('resize', this.handleResize);\r\n  },\r\n  destroyed() {\r\n    window.removeEventListener('resize', this.handleResize);\r\n  },\r\n  mounted() {\r\n    const fallbackLabelWidth = 32 + this.sliderVal.toString().length * 4.5;\r\n    this.sliderWidth = this.$refs.input.clientWidth;\r\n    this.labelWidth = this.$refs.tooltip.$refs.label.clientWidth || fallbackLabelWidth;\r\n    this.tooltipOffset = this.getNewTooltipPosition();\r\n  },\r\n  watch: {\r\n    sliderVal: {\r\n      handler() {\r\n        this.$nextTick(() => {\r\n          this.configureTooltip();\r\n          if (this.$refs['value-input'].textContent !== this.sliderVal) {\r\n            this.$refs['value-input'].textContent = this.sliderVal;\r\n          }\r\n        });\r\n      },\r\n      immediate: true,\r\n      deep: true,\r\n    },\r\n  },\r\n  methods: {\r\n    configureTooltip() {\r\n      this.sliderWidth = this.$refs.input.clientWidth;\r\n      this.labelWidth = this.$refs.tooltip.$refs.label.clientWidth;\r\n      this.tooltipOffset = this.getNewTooltipPosition();\r\n    },\r\n    handleResize() {\r\n      this.configureTooltip();\r\n    },\r\n    handleValueChange() {\r\n      this.configureTooltip();\r\n      this.$emit('valueChange', this.sliderVal);\r\n    },\r\n    handleInput(event) {\r\n      this.sliderVal = event.srcElement.textContent;\r\n\r\n      this.handleValueChange();\r\n    },\r\n    getNewTooltipPosition() {\r\n      const haldThumbWidth = 12 / 2;\r\n      const halfLabelWidth = this.labelWidth / 2;\r\n      const centerPosition = this.sliderWidth / 2;\r\n\r\n      let percentOfRange = (this.sliderVal - this.minValue) / (this.maxValue - this.minValue);\r\n      if (Number.isNaN(percentOfRange)) {\r\n        percentOfRange = 0;\r\n      }\r\n\r\n      const valuePXPosition = percentOfRange * this.sliderWidth;\r\n      const distFromCenter = valuePXPosition - centerPosition;\r\n      const percentDistFromCenter = distFromCenter / centerPosition;\r\n      const offset = percentDistFromCenter * haldThumbWidth;\r\n\r\n      const finalLabelPosition = valuePXPosition - halfLabelWidth - offset;\r\n      return finalLabelPosition;\r\n    },\r\n  },\r\n  computed: {\r\n    cssVars() {\r\n      return {\r\n        '--val': this.sliderVal,\r\n        '--tooltip-offset': this.tooltipOffset,\r\n        '--min': this.minValue,\r\n        '--max': this.maxValue,\r\n      };\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../assets/scss/unnnic.scss';\r\n\r\n.value-input {\r\n  display: flex;\r\n  margin-left: $unnnic-spacing-inline-sm;\r\n  background: $unnnic-color-neutral-snow;\r\n  border-radius: $unnnic-border-radius-sm;\r\n  color: $unnnic-color-neutral-dark;\r\n  font-weight: $unnnic-font-weight-regular;\r\n  font-family: $unnnic-font-family-secondary;\r\n  box-sizing: border-box;\r\n  font-size: $unnnic-font-size-body-md;\r\n  line-height: $unnnic-font-size-body-md + $unnnic-line-height-medium;\r\n  padding: $unnnic-squish-nano;\r\n  height: $unnnic-font-size-body-md + $unnnic-line-height-medium + 0.5 * $unnnic-font-size * 2;\r\n  position: relative;\r\n\r\n  &:before {\r\n    content: ' ';\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    border: $unnnic-border-width-thinner solid $unnnic-color-neutral-clean;\r\n    border-radius: inherit;\r\n    pointer-events: none;\r\n  }\r\n\r\n  &:focus:before {\r\n    border-color: $unnnic-color-neutral-cleanest;\r\n  }\r\n\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n@import '../../assets/scss/unnnic.scss';\r\n\r\n.unnnic-slider {\r\n  display: flex;\r\n  width: 100%;\r\n  &__content {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    margin-top: $unnnic-spacing-stack-xs;\r\n\r\n    &__tooltip {\r\n      display: flex !important;\r\n      width: 100%;\r\n      align-self: center;\r\n    }\r\n\r\n    &__labels {\r\n      display: flex;\r\n\r\n      font-family: $unnnic-font-family-secondary;\r\n      font-weight: $unnnic-font-weight-regular;\r\n      font-size: $unnnic-font-size-body-md;\r\n      line-height: $unnnic-font-size-body-md + $unnnic-line-height-md;\r\n      color: $unnnic-color-neutral-cloudy;\r\n\r\n      &__max {\r\n        margin-left: auto;\r\n      }\r\n    }\r\n\r\n    &__range-input {\r\n      appearance: none;\r\n      -webkit-appearance: none;\r\n      width: 100%;\r\n      margin: 0;\r\n      @mixin thumb() {\r\n        box-sizing: border-box;\r\n        width: $unnnic-icon-size-xs;\r\n        height: $unnnic-icon-size-xs;\r\n        background: $unnnic-color-neutral-snow;\r\n        border: $unnnic-border-width-thin solid $unnnic-color-aux-baby-blue;\r\n        border-radius: 50%;\r\n\r\n        &:hover {\r\n          border: $unnnic-border-width-thin solid $unnnic-color-aux-blue;\r\n        }\r\n\r\n        &:active {\r\n          box-shadow: $unnnic-shadow-level-near;\r\n        }\r\n      }\r\n\r\n      /* Chrome */\r\n      &::-webkit-slider-thumb {\r\n        -webkit-appearance: none;\r\n        @include thumb;\r\n        margin-top: -$unnnic-spacing-stack-nano;\r\n      }\r\n      /* Firefox */\r\n      &::-moz-range-thumb {\r\n        @include thumb;\r\n      }\r\n      /* IE */\r\n      &::-ms-thumb {\r\n        @include thumb;\r\n      }\r\n\r\n      @mixin track($fill: 0) {\r\n        width: 100%;\r\n        height: 4px;\r\n        box-sizing: border-box;\r\n        border: none;\r\n        background: $unnnic-color-neutral-soft;\r\n        border-radius: $unnnic-border-radius-pill;\r\n      }\r\n\r\n      /* Chrome */\r\n      &::-webkit-slider-runnable-track {\r\n        @include track(1);\r\n        margin: $unnnic-spacing-inline-xs 0;\r\n        --progress: calc((var(--val) - var(--min)) / ((var(--max) - var(--min))) * 100%);\r\n        background: linear-gradient(\r\n          to right,\r\n          $unnnic-color-aux-baby-blue 0%,\r\n          $unnnic-color-aux-baby-blue calc(var(--progress)),\r\n          $unnnic-color-neutral-soft calc(var(--progress)),\r\n          $unnnic-color-neutral-soft 100%\r\n        );\r\n      }\r\n      /* Firefox */\r\n      &::-moz-range-track {\r\n        @include track;\r\n      }\r\n      /* IE */\r\n      &::-ms-track {\r\n        @include track;\r\n      }\r\n\r\n      @mixin fill() {\r\n        height: 4px;\r\n        background: $unnnic-color-aux-baby-blue;\r\n      }\r\n\r\n      /* Firefox */\r\n      &::-moz-range-progress {\r\n        @include fill;\r\n      }\r\n      /* IE */\r\n      &::-ms-fill-lower {\r\n        @include fill;\r\n      }\r\n    }\r\n  }\r\n\r\n  .unnnic-tooltip-label {\r\n    position: absolute;\r\n    left: calc(var(--tooltip-offset) * 1px) !important;\r\n    top: -45px !important;\r\n  }\r\n}\r\n</style>\r\n"],"names":["_sfc_main","unnnicTooltip","fallbackLabelWidth","event","halfLabelWidth","centerPosition","percentOfRange","valuePXPosition","offset","_hoisted_1","_hoisted_3","_hoisted_4","_hoisted_5","_createElementBlock","$options","_createElementVNode","_createVNode","_component_unnnicTooltip","$data","$event","$props","args","_toDisplayString"],"mappings":"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"}