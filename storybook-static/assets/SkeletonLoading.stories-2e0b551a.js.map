{"version":3,"file":"SkeletonLoading.stories-2e0b551a.js","sources":["../../src/components/SkeletonLoading/skeletonTheme.vue","../../src/components/SkeletonLoading/SkeletonLoading.vue"],"sourcesContent":["<template>\r\n  <div :style=\"themeStyle\">\r\n    <component v-if=\"tag\" :is=\"tag\">\r\n      <slot></slot>\r\n    </component>\r\n    <slot v-else></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, provide } from 'vue';\r\nimport colors from '../../assets/scss/colors.scss?inline'\r\n\r\nconst backgroundValueRegex = /unnnicColorBackgroundSolo:\\s*(.*)\\;/\r\nexport const DEFAULT_BACKGROUND = backgroundValueRegex.exec(colors)[1];\r\nexport const DEFAULT_HIGHLIGHT = 'rgba(255,255,255,0.375)';\r\nexport const SkeletonStyle = {\r\n  backgroundColor: DEFAULT_BACKGROUND,\r\n  backgroundImage: `linear-gradient(\r\n    90deg,\r\n    ${DEFAULT_BACKGROUND},\r\n    ${DEFAULT_HIGHLIGHT},\r\n    ${DEFAULT_BACKGROUND}\r\n  )`,\r\n};\r\nexport default {\r\n  name: 'unnnicSkeletonTheme',\r\n  setup() {\r\n    const themeStyle = ref(SkeletonStyle);\r\n    const theme = ref({});\r\n\r\n    provide('_themeStyle', themeStyle);\r\n    provide('_skeletonTheme', theme);\r\n\r\n    return {\r\n      themeStyle,\r\n      theme,\r\n    };\r\n  },\r\n  props: {\r\n    color: {\r\n      type: String,\r\n      default: DEFAULT_BACKGROUND,\r\n    },\r\n    highlight: {\r\n      type: String,\r\n      default: DEFAULT_HIGHLIGHT,\r\n    },\r\n    duration: {\r\n      type: Number,\r\n      default: 1.5,\r\n    },\r\n    tag: {\r\n      type: String,\r\n      default: 'div',\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: undefined,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      themeStyle: { ...SkeletonStyle },\r\n    };\r\n  },\r\n  mounted() {\r\n    const { color, highlight, duration } = this;\r\n    this.themeStyle.backgroundColor = color;\r\n    this.themeStyle.backgroundImage = `linear-gradient(\r\n      90deg,\r\n      ${color},\r\n      ${highlight},\r\n      ${color}\r\n    )`;\r\n    if (duration) {\r\n      this.themeStyle.animation = `SkeletonLoading ${duration}s ease-in-out infinite`;\r\n    } else {\r\n      this.themeStyle.animation = '';\r\n      this.themeStyle.backgroundImage = '';\r\n    }\r\n  },\r\n};\r\n</script>\r\n","<template>\r\n  <component :is=\"tag\" v-if=\"showLoading\">\r\n    <span\r\n      v-for=\"(element, index) in elements\"\r\n      :key=\"index\"\r\n      :class=\"classes\"\r\n      :style=\"styles\"\r\n    >\r\n      &zwnj;\r\n    </span>\r\n  </component>\r\n</template>\r\n\r\n<script>\r\nimport { ref, inject } from 'vue';\r\nimport { SkeletonStyle } from './skeletonTheme.vue';\r\n\r\nexport default {\r\n  name: 'unnnicSkeletonLoading',\r\n  setup() {\r\n    const themeStyle = inject('_themeStyle', ref(SkeletonStyle));\r\n    const theme = inject('_skeletonTheme', ref({}));\r\n\r\n    return {\r\n      themeStyle,\r\n      theme,\r\n    };\r\n  },\r\n  props: {\r\n    prefix: {\r\n      type: String,\r\n      default: 'unnnic',\r\n    },\r\n    count: {\r\n      type: Number,\r\n      default: 1,\r\n    },\r\n    duration: {\r\n      type: Number,\r\n      default: 1.5,\r\n    },\r\n    tag: {\r\n      type: String,\r\n      default: 'span',\r\n    },\r\n    width: [String, Number],\r\n    height: [String, Number],\r\n    circle: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: undefined,\r\n    },\r\n  },\r\n  computed: {\r\n    isLoading() {\r\n      return typeof this.theme.loading !== 'undefined'\r\n        ? this.theme.loading\r\n        : this.loading;\r\n    },\r\n    classes() {\r\n      return [`${this.prefix}-skeleton`];\r\n    },\r\n    styles() {\r\n      const styles = { ...this.themeStyle };\r\n      if (this.duration) {\r\n        styles.animation = `SkeletonLoading ${this.duration}s ease-in-out infinite`;\r\n      } else {\r\n        styles.backgroundImage = '';\r\n      }\r\n      if (this.width) styles.width = this.width;\r\n      if (this.height) styles.height = this.height;\r\n      if (this.circle) styles.borderRadius = '50%';\r\n      return styles;\r\n    },\r\n    elements() {\r\n      const elements = [];\r\n      for (let i = 0; i < this.count; i += 1) {\r\n        elements.push({});\r\n      }\r\n      return elements;\r\n    },\r\n    showLoading() {\r\n      return typeof this.isLoading !== 'undefined'\r\n      ? this.isLoading\r\n      : this.isEmptyVNode(this.$slots.default);\r\n    },\r\n  },\r\n  methods: {\r\n    isEmptyVNode(children) {\r\n      if (!children) return true;\r\n      const [firstNode] = children;\r\n      let str = firstNode.text;\r\n      if (str) {\r\n        // remove all line-break and space character\r\n        str = str.replace(/(\\n|\\r\\n|\\s)/g, '');\r\n      }\r\n      return typeof firstNode.tag === 'undefined' && !str;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"../../assets/scss/unnnic.scss\";\r\n\r\n.unnnic-skeleton {\r\n  background-size: 500px 100%;\r\n  background-repeat: no-repeat;\r\n  border-radius: $unnnic-border-radius-sm;\r\n  display: inline-block;\r\n  line-height: 1;\r\n  width: 100%;\r\n  height: inherit;\r\n}\r\n@keyframes SkeletonLoading {\r\n  0% {\r\n    background-position: -500px 0;\r\n  }\r\n  100% {\r\n    background-position: calc(500px + 100%) 0;\r\n  }\r\n}\r\n</style>\r\n"],"names":["backgroundValueRegex","DEFAULT_BACKGROUND","colors","DEFAULT_HIGHLIGHT","SkeletonStyle","_sfc_main","themeStyle","ref","theme","provide","color","highlight","duration","inject","styles","elements","i","children","firstNode","str","$options","_openBlock","_createBlock","_resolveDynamicComponent","$props","_createElementBlock","_Fragment","_renderList","element","index"],"mappings":"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"}