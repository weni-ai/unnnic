{"version":3,"file":"InputDatePicker.stories-dd267c0b.js","sources":["../../src/components/InputDatePicker/InputDatePicker.vue"],"sourcesContent":["<template>\r\n  <div ref=\"dropdown\" :class=\"['dropdown', { active: showCalendarFilter }]\">\r\n    <unnnic-input\r\n      class=\"input\"\r\n      :size=\"size\"\r\n      icon-left=\"notes-1\"\r\n      @focus=\"showCalendarFilter = true\"\r\n      readonly\r\n      :modelValue=\"filterText\"\r\n    ></unnnic-input>\r\n\r\n    <div class=\"dropdown-data\" :style=\"{ [position]: '0' }\">\r\n      <unnnic-date-picker\r\n        v-if=\"showCalendarFilter\"\r\n        :type=\"type\"\r\n        :clearLabel=\"clearText\"\r\n        :actionLabel=\"actionText\"\r\n        :months=\"months\"\r\n        :days=\"days\"\r\n        :options=\"options\"\r\n        @submit=\"changeDate\"\r\n        :initial-start-date=\"initialStartDate\"\r\n        :initial-end-date=\"initialEndDate\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment';\r\nimport UnnnicInput from '../Input/Input.vue';\r\nimport UnnnicDatePicker from '../DatePicker/DatePicker.vue';\r\n\r\nexport default {\r\n  model: {\r\n    event: 'changed',\r\n  },\r\n\r\n  components: {\r\n    UnnnicInput,\r\n    UnnnicDatePicker,\r\n  },\r\n\r\n  props: {\r\n    modelValue: {\r\n      type: Object,\r\n    },\r\n\r\n    type: {\r\n      type: String,\r\n      default: 'day',\r\n    },\r\n\r\n    size: {\r\n      type: String,\r\n      default: 'md',\r\n    },\r\n\r\n    clearText: {\r\n      type: String,\r\n      default: 'Clear',\r\n    },\r\n\r\n    actionText: {\r\n      type: String,\r\n      default: 'Filter',\r\n    },\r\n\r\n    months: {\r\n      type: Array,\r\n    },\r\n\r\n    days: {\r\n      type: Array,\r\n    },\r\n\r\n    options: {\r\n      type: Array,\r\n    },\r\n\r\n    format: {\r\n      type: String,\r\n      default: 'YYYY-MM-DD',\r\n    },\r\n\r\n    inputFormat: {\r\n      type: String,\r\n      default: 'MM-DD-YYYY',\r\n    },\r\n\r\n    position: {\r\n      type: String,\r\n      default: 'left',\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      showCalendarFilter: false,\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    filterText() {\r\n      const dates = [];\r\n\r\n      if (this.modelValue.start) {\r\n        dates.push(moment(this.modelValue.start, this.format).format(this.inputFormat));\r\n      }\r\n\r\n      if (this.modelValue.end) {\r\n        dates.push(moment(this.modelValue.end, this.format).format(this.inputFormat));\r\n      }\r\n\r\n      if (!dates.length) {\r\n        return 'â€”';\r\n      }\r\n\r\n      return dates.join(' ~ ');\r\n    },\r\n\r\n    initialStartDate() {\r\n      return this.modelValue.start\r\n        ? moment(this.modelValue.start, this.format).format('MM DD YYYY')\r\n        : null;\r\n    },\r\n\r\n    initialEndDate() {\r\n      return this.modelValue.end\r\n        ? moment(this.modelValue.end, this.format).format('MM DD YYYY')\r\n        : null;\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    window.document.body.addEventListener('click', this.mouseout);\r\n  },\r\n\r\n  beforeDestroy() {\r\n    window.document.body.removeEventListener('click', this.mouseout);\r\n  },\r\n\r\n  methods: {\r\n    mouseout(event) {\r\n      if (this.$refs.dropdown?.contains(event.target)) {\r\n        return;\r\n      }\r\n\r\n      this.showCalendarFilter = false;\r\n    },\r\n\r\n    changeDate(value) {\r\n      const startDate = value.startDate.replace(/(\\d+)-(\\d+)-(\\d+)/, '$3-$1-$2');\r\n\r\n      const endDate = value.endDate.replace(/(\\d+)-(\\d+)-(\\d+)/, '$3-$1-$2');\r\n\r\n      this.showCalendarFilter = false;\r\n\r\n      this.$emit('update:model-value', {\r\n        start: startDate ? moment(startDate, 'YYYY-MM-DD').format(this.format) : null,\r\n        end: endDate ? moment(endDate, 'YYYY-MM-DD').format(this.format) : null,\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../assets/scss/unnnic.scss';\r\n\r\n.dropdown {\r\n  position: relative;\r\n  display: inline-block;\r\n\r\n  .dropdown-data {\r\n    position: absolute;\r\n    pointer-events: none;\r\n    display: none;\r\n    top: 100%;\r\n    z-index: 2;\r\n    margin-top: $unnnic-spacing-stack-nano;\r\n    width: max-content;\r\n  }\r\n\r\n  &.active .dropdown-data {\r\n    pointer-events: auto;\r\n    display: block;\r\n  }\r\n\r\n  .input {\r\n    display: inline-block;\r\n  }\r\n}\r\n</style>\r\n"],"names":["_sfc_main","UnnnicInput","UnnnicDatePicker","dates","moment","event","_a","value","startDate","endDate","_createElementBlock","$data","_createVNode","_component_unnnic_input","$props","$options","_createElementVNode","_createBlock","_component_unnnic_date_picker"],"mappings":"maAiCA,MAAKA,EAAU,CACb,MAAO,CACL,MAAO,SACR,EAED,WAAY,CACV,YAAAC,EACA,iBAAAC,CACD,EAED,MAAO,CACL,WAAY,CACV,KAAM,MACP,EAED,KAAM,CACJ,KAAM,OACN,QAAS,KACV,EAED,KAAM,CACJ,KAAM,OACN,QAAS,IACV,EAED,UAAW,CACT,KAAM,OACN,QAAS,OACV,EAED,WAAY,CACV,KAAM,OACN,QAAS,QACV,EAED,OAAQ,CACN,KAAM,KACP,EAED,KAAM,CACJ,KAAM,KACP,EAED,QAAS,CACP,KAAM,KACP,EAED,OAAQ,CACN,KAAM,OACN,QAAS,YACV,EAED,YAAa,CACX,KAAM,OACN,QAAS,YACV,EAED,SAAU,CACR,KAAM,OACN,QAAS,MACV,CACF,EAED,MAAO,CACL,MAAO,CACL,mBAAoB,GAEvB,EAED,SAAU,CACR,YAAa,CACX,MAAMC,EAAQ,CAAA,EAUd,OARI,KAAK,WAAW,OAClBA,EAAM,KAAKC,EAAO,KAAK,WAAW,MAAO,KAAK,MAAM,EAAE,OAAO,KAAK,WAAW,CAAC,EAG5E,KAAK,WAAW,KAClBD,EAAM,KAAKC,EAAO,KAAK,WAAW,IAAK,KAAK,MAAM,EAAE,OAAO,KAAK,WAAW,CAAC,EAGzED,EAAM,OAIJA,EAAM,KAAK,KAAK,EAHd,GAIV,EAED,kBAAmB,CACjB,OAAO,KAAK,WAAW,MACnBC,EAAO,KAAK,WAAW,MAAO,KAAK,MAAM,EAAE,OAAO,YAAY,EAC9D,IACL,EAED,gBAAiB,CACf,OAAO,KAAK,WAAW,IACnBA,EAAO,KAAK,WAAW,IAAK,KAAK,MAAM,EAAE,OAAO,YAAY,EAC5D,IACL,CACF,EAED,SAAU,CACR,OAAO,SAAS,KAAK,iBAAiB,QAAS,KAAK,QAAQ,CAC7D,EAED,eAAgB,CACd,OAAO,SAAS,KAAK,oBAAoB,QAAS,KAAK,QAAQ,CAChE,EAED,QAAS,CACP,SAASC,EAAO,QACVC,EAAA,KAAK,MAAM,WAAX,MAAAA,EAAqB,SAASD,EAAM,UAIxC,KAAK,mBAAqB,GAC3B,EAED,WAAWE,EAAO,CAChB,MAAMC,EAAYD,EAAM,UAAU,QAAQ,oBAAqB,UAAU,EAEnEE,EAAUF,EAAM,QAAQ,QAAQ,oBAAqB,UAAU,EAErE,KAAK,mBAAqB,GAE1B,KAAK,MAAM,qBAAsB,CAC/B,MAAOC,EAAYJ,EAAOI,EAAW,YAAY,EAAE,OAAO,KAAK,MAAM,EAAI,KACzE,IAAKC,EAAUL,EAAOK,EAAS,YAAY,EAAE,OAAO,KAAK,MAAM,EAAI,IACrE,CAAC,CACF,CACF,CACH,yFAnKEC,EAwBM,MAAA,CAxBD,IAAI,WAAY,4BAA8BC,EAAkB,kBAAA,CAAA,CAAA,IACnEC,EAOgBC,EAAA,CANd,MAAM,QACL,KAAMC,EAAI,KACX,YAAU,UACT,uBAAOH,EAAkB,mBAAA,IAC1B,SAAA,GACC,WAAYI,EAAU,0CAGzBC,EAaM,MAAA,CAbD,MAAM,gBAAiB,UAAUF,EAAQ,QAAA,EAAA,GAAA,CAAA,IAEpCH,EAAkB,wBAD1BM,EAWEC,EAAA,OATC,KAAMJ,EAAI,KACV,WAAYA,EAAS,UACrB,YAAaA,EAAU,WACvB,OAAQA,EAAM,OACd,KAAMA,EAAI,KACV,QAASA,EAAO,QAChB,SAAQC,EAAU,WAClB,qBAAoBA,EAAgB,iBACpC,mBAAkBA,EAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}