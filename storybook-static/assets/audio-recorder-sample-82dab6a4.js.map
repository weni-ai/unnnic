{"version":3,"file":"audio-recorder-sample-82dab6a4.js","sources":["../../src/components/AudioRecorder/AudioHandler.vue","../../src/components/AudioRecorder/AudioPlayer.vue","../../src/components/AudioRecorder/AudioRecorder.vue","../../src/stories/assets/audios/audio-recorder-sample.mp3"],"sourcesContent":["<template>\n  <div class=\"audio-handler\">\n    <div>\n      <span class=\"audio-handler__time\">\n        {{ time }}\n      </span>\n\n      <unnnic-icon\n        icon=\"indicator\"\n        size=\"sm\"\n        :class=\"[{ 'is-recording': isRecording }]\"\n        :scheme=\"isRecording ? null : 'neutral-clean'\"\n      />\n    </div>\n\n    <unnnic-tool-tip enabled text=\"Salvar\" side=\"top\">\n      <span @click=\"save\" @keypress.enter=\"save\" class=\"unnnic--clickable\">\n        <unnnic-icon icon=\"check-circle-1-1\" scheme=\"feedback-green\" />\n      </span>\n    </unnnic-tool-tip>\n  </div>\n</template>\n\n<script>\nimport UnnnicIcon from '../Icon.vue';\nimport UnnnicToolTip from '../ToolTip/ToolTip.vue';\n\nexport default {\n  components: {\n    UnnnicIcon,\n    UnnnicToolTip,\n  },\n\n  props: {\n    isRecording: {\n      type: Boolean,\n      default: false,\n    },\n    time: {\n      type: String,\n      default: '',\n    },\n  },\n\n  methods: {\n    save() {\n      this.$emit('save');\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../assets/scss/unnnic.scss';\n\n.audio-handler {\n  display: inline-flex;\n  align-items: center;\n  gap: $unnnic-spacing-stack-xs;\n\n  .unnnic-icon.is-recording ::v-deep {\n    margin-left: $unnnic-spacing-inline-nano;\n\n    .primary {\n      animation: ease-in-out pulse 2s infinite;\n    }\n  }\n}\n\n@keyframes pulse {\n  0% {\n    fill: $unnnic-color-neutral-soft;\n  }\n\n  50% {\n    fill: $unnnic-color-feedback-red;\n  }\n\n  100% {\n    fill: $unnnic-color-neutral-soft;\n  }\n}\n</style>\n","<template>\r\n  <div class=\"audio-player\">\r\n    <span\r\n      @click=\"click\"\r\n      @keypress.enter=\"click\"\r\n      class=\"unnnic--clickable\"\r\n      :class=\"{ inactive: reqStatus === 'sending' }\"\r\n    >\r\n      <unnnic-icon :icon=\"playbackIcon\" scheme=\"neutral-darkest\" />\r\n    </span>\r\n\r\n    <input\r\n      v-if=\"showProgressBar\"\r\n      class=\"audio-player__progress-bar unnnic--clickable\"\r\n      :class=\"{ inactive: reqStatus !== 'default' }\"\r\n      type=\"range\"\r\n      min=\"0\"\r\n      :max=\"duration\"\r\n      step=\"0.001\"\r\n      v-model=\"progress\"\r\n      @input=\"emitProgressBarUpdate\"\r\n      :style=\"progressBarStyle\"\r\n    />\r\n\r\n    <div v-else class=\"audio-player__progress-bar-bars\">\r\n      <div\r\n        v-for=\"(bar, index) in bars\"\r\n        :key=\"index\"\r\n        :style=\"{ height: `${bar * 100}%` }\"\r\n        :class=\"['bar', { active: isBarActive(index) }]\"\r\n      ></div>\r\n    </div>\r\n\r\n    <span class=\"audio-player__time\">\r\n      {{ time }}\r\n    </span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport UnnnicIcon from '../Icon.vue';\r\n\r\nexport default {\r\n  components: {\r\n    UnnnicIcon,\r\n  },\r\n\r\n  props: {\r\n    time: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    duration: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    reqStatus: {\r\n      type: String,\r\n      default: 'default',\r\n      validate(status) {\r\n        return ['default', 'sending', 'failed'].includes(status);\r\n      },\r\n    },\r\n    isPlaying: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    progressBarPercentualValue: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    bars: {\r\n      type: Array,\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      progress: 0,\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    click() {\r\n      if (this.reqStatus === 'failed') {\r\n        this.$emit('failed-click');\r\n      } else if (this.reqStatus !== 'sending') {\r\n        this.togglePlayback();\r\n      }\r\n    },\r\n\r\n    togglePlayback() {\r\n      this[this.isPlaying ? 'pause' : 'play']();\r\n    },\r\n\r\n    play() {\r\n      this.$emit('play');\r\n    },\r\n\r\n    pause() {\r\n      this.$emit('pause');\r\n    },\r\n\r\n    emitProgressBarUpdate(event) {\r\n      this.$emit('progress-bar-update', event);\r\n    },\r\n\r\n    isBarActive(index) {\r\n      return (this.progressBarPercentualValue / 100) * 22 > index;\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    showProgressBar() {\r\n      return !this.bars || this.bars.length === 0;\r\n    },\r\n    playbackIcon() {\r\n      const statusMapping = {\r\n        sending: 'loading-circle-1',\r\n        failed: 'upload-bottom-1',\r\n      };\r\n\r\n      if (this.reqStatus in statusMapping) {\r\n        return statusMapping[this.reqStatus];\r\n      }\r\n\r\n      return this.isPlaying ? 'controls-pause-1' : 'controls-play-1';\r\n    },\r\n    progressBarStyle() {\r\n      return {\r\n        '--progressBarPercentualValue': `${this.progress}%`,\r\n      };\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    progressBarPercentualValue(newValue) {\r\n      this.progress = newValue;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../assets/scss/unnnic.scss';\r\n\r\n.audio-player {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: $unnnic-spacing-stack-xs;\r\n\r\n  width: 100%;\r\n\r\n  &__progress-bar {\r\n    position: relative;\r\n\r\n    width: clamp(85px, 100%, 185px);\r\n    height: 2px;\r\n\r\n    outline: none;\r\n\r\n    &::before {\r\n      content: '';\r\n\r\n      position: absolute;\r\n      left: 0;\r\n\r\n      width: var(--progressBarPercentualValue);\r\n      height: 100%;\r\n      place-self: center;\r\n\r\n      border-radius: $unnnic-border-radius-sm;\r\n      background: $unnnic-color-neutral-darkest;\r\n    }\r\n\r\n    &::-webkit-slider-runnable-track {\r\n      width: 100%;\r\n      height: 100%;\r\n\r\n      border-radius: $unnnic-border-radius-sm;\r\n      background: $unnnic-color-neutral-cleanest;\r\n    }\r\n    &::-webkit-slider-thumb {\r\n      opacity: 0;\r\n    }\r\n\r\n    // Duplicate moz code from webkit needed to work.\r\n    // It won't work if combine the two.\r\n    &::-moz-range-track {\r\n      width: 100%;\r\n      height: 100%;\r\n\r\n      border-radius: $unnnic-border-radius-sm;\r\n      background: $unnnic-color-neutral-cleanest;\r\n    }\r\n    &::-moz-range-thumb {\r\n      opacity: 0;\r\n    }\r\n\r\n    &-bars {\r\n      width: 11.5 * $unnnic-font-size;\r\n      height: 1 * $unnnic-font-size;\r\n\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n\r\n      border-radius: $unnnic-border-radius-sm;\r\n\r\n      .bar {\r\n        width: 3px;\r\n\r\n        background: $unnnic-color-neutral-cleanest;\r\n        border-radius: 1.5px;\r\n\r\n        &.active {\r\n          background: $unnnic-color-neutral-darkest;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  &__time {\r\n    margin-left: $unnnic-spacing-stack-xs;\r\n  }\r\n\r\n  .inactive {\r\n    pointer-events: none;\r\n  }\r\n}\r\n</style>\r\n","<template>\n  <section v-if=\"value || isRecording || src\" class=\"unnnic-audio-recorder\">\n    <unnnic-tool-tip v-if=\"isRecording || canDiscard\" enabled text=\"Descartar\" side=\"top\">\n      <span @click=\"discard\" @keypress.enter=\"discard\" class=\"delete-button unnnic--clickable\">\n        <unnnic-icon icon=\"delete-1-1\" scheme=\"feedback-red\" />\n      </span>\n    </unnnic-tool-tip>\n    <audio-handler\n      v-if=\"isRecording\"\n      :is-recording=\"isRecording\"\n      :time=\"numberToTimeString(duration)\"\n      @save=\"save\"\n    />\n    <audio-player\n      v-else\n      :time=\"numberToTimeString(isIdle || isRecorded ? duration : currentTime)\"\n      :reqStatus=\"reqStatus\"\n      :progress-bar-percentual-value=\"playedPercentual\"\n      :is-playing=\"isPlaying\"\n      :bars=\"playbackAudioBars ? bars : null\"\n      @failed-click=\"$emit('failed-click')\"\n      @pause=\"pause\"\n      @play=\"play\"\n      @progress-bar-update=\"progressBarUpdate\"\n    />\n  </section>\n</template>\n\n<script>\nimport AudioHandler from './AudioHandler.vue';\nimport AudioPlayer from './AudioPlayer.vue';\nimport UnnnicIcon from '../Icon.vue';\nimport UnnnicToolTip from '../ToolTip/ToolTip.vue';\n\nconst filterData = (audioBuffer) => {\n  const rawData = audioBuffer.getChannelData(0); // We only need to work with one channel of data\n  const samples = 22; // Number of samples we want to have in our final data set\n  const blockSize = Math.floor(rawData.length / samples);\n  // the number of samples in each subdivision\n  const filteredData = [];\n  for (let i = 0; i < samples; i += 1) {\n    const blockStart = blockSize * i; // the location of the first sample in the block\n    let sum = 0;\n    for (let j = 0; j < blockSize; j += 1) {\n      sum += Math.abs(rawData[blockStart + j]); // find the sum of all the samples in the block\n    }\n    filteredData.push(sum / blockSize); // divide the sum by the block size to get the average\n  }\n\n  return filteredData;\n};\n\nconst normalizeData = (filteredData) => {\n  // eslint-disable-next-line no-restricted-properties\n  const multiplier = Math.pow(Math.max(...filteredData), -1);\n  return filteredData.map((n) => n * multiplier);\n};\n\nexport default {\n  name: 'AudioRecorder',\n\n  components: {\n    AudioHandler,\n    AudioPlayer,\n    UnnnicIcon,\n    UnnnicToolTip,\n  },\n\n  props: {\n    value: {\n      type: HTMLAudioElement,\n    },\n\n    src: {\n      type: String,\n    },\n\n    canDiscard: {\n      type: Boolean,\n      default: true,\n    },\n\n    reqStatus: {\n      type: String,\n      default: 'default',\n      validate(status) {\n        return ['default', 'sending', 'failed'].includes(status);\n      },\n    },\n\n    playbackAudioBars: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  data: () => ({\n    /**\n     * @type MediaRecorder\n     */\n    recorder: null,\n    /**\n     * @type HTMLAudioElement\n     */\n    audio: null,\n    /**\n     * @type MediaStream\n     */\n    stream: null,\n    audioChunks: [],\n    duration: 0,\n    currentTime: 0,\n    mockMilliseconds: 0,\n    intervalMockMilliseconds: null,\n    /**\n     * @type {('idle'|'recording'|'recorded'|'playing'|'paused')}\n     */\n    status: 'idle',\n\n    bars: [],\n  }),\n\n  computed: {\n    isIdle() {\n      return this.status === 'idle';\n    },\n    isPlaying() {\n      return this.status === 'playing';\n    },\n    isRecording() {\n      return this.status === 'recording';\n    },\n    isRecorded() {\n      return this.status === 'recorded';\n    },\n    playedPercentual() {\n      return (this.currentTime * 100) / this.duration;\n    },\n  },\n\n  watch: {\n    src: {\n      immediate: true,\n\n      async handler() {\n        if (!this.src) {\n          return;\n        }\n\n        this.audio = new Audio();\n        this.audio.setAttribute('src', this.src);\n\n        this.addAudioEventListeners();\n      },\n    },\n    status(newValue) {\n      this.$emit('status', newValue);\n    },\n  },\n\n  methods: {\n    // entry point; accessed by external components\n    async record() {\n      if (this.hasInUseRecordDevice()) return;\n\n      this.discard();\n\n      await this.getAudioRecordDevice();\n      this.setupRecorderAndAudio();\n      this.addListeners();\n\n      this.startRecord();\n    },\n    hasInUseRecordDevice() {\n      return !!this.recorder;\n    },\n    async getAudioRecordDevice() {\n      this.stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      this.recorder = new MediaRecorder(this.stream);\n    },\n    async setupRecorderAndAudio() {\n      this.audio = new Audio();\n      this.audioChunks = [];\n      this.duration = 0;\n      this.currentTime = 0;\n    },\n    addListeners() {\n      this.recorder.addEventListener('dataavailable', (event) => {\n        this.audioChunks.push(event.data);\n        const blob = new Blob(this.audioChunks);\n        const src = URL.createObjectURL(blob);\n        this.audio.src = src;\n        // necessary to have the audio duration correctly\n        this.audio.currentTime = 1e100;\n      });\n\n      this.recorder.addEventListener('stop', () => {\n        this.stream.getTracks().forEach((track) => {\n          track.stop();\n        });\n        this.recorder = null;\n      });\n\n      this.addAudioEventListeners();\n    },\n\n    addAudioEventListeners() {\n      const setDuration = () => {\n        if (this.audio.duration === Infinity) {\n          return;\n        }\n        this.audio.currentTime = 0;\n        this.duration = this.audio.duration;\n      };\n\n      this.audio.addEventListener('loadeddata', setDuration);\n      this.audio.addEventListener('durationchange', setDuration);\n\n      this.audio.addEventListener('play', () => {\n        this.status = 'playing';\n      });\n\n      this.audio.addEventListener('pause', () => {\n        this.status = 'paused';\n      });\n\n      this.audio.addEventListener('timeupdate', () => {\n        if (this.status !== 'playing') return;\n\n        this.currentTime = this.audio.currentTime;\n      });\n\n      this.audio.addEventListener('ended', () => {\n        this.currentTime = 0;\n        this.status = 'recorded';\n      });\n    },\n\n    startMockMilliseconds() {\n      this.intervalMockMilliseconds = setInterval(() => {\n        this.mockMilliseconds += 1;\n\n        if (this.mockMilliseconds >= 100) {\n          this.mockMilliseconds = 0;\n        }\n      }, 10); // 0.01 second\n    },\n    stopMockMilliseconds() {\n      clearInterval(this.intervalMockMilliseconds);\n    },\n\n    startRecord() {\n      this.status = 'recording';\n      const recordTimeSliceInMilliseconds = 500;\n      this.recorder.start(recordTimeSliceInMilliseconds);\n\n      this.startMockMilliseconds();\n    },\n    discard() {\n      if (this.audio) {\n        this.stop();\n      }\n\n      this.$emit('input', null);\n\n      this.status = 'idle';\n    },\n    save() {\n      this.stop();\n      this.status = 'recorded';\n\n      this.stopMockMilliseconds();\n    },\n    pause() {\n      this.audio.pause();\n    },\n    async stop() {\n      this.status = 'recorded';\n      this.pause();\n\n      if (this.hasInUseRecordDevice()) {\n        this.recorder.stop();\n      }\n\n      this.$emit('input', this.audio);\n\n      this.stopMockMilliseconds();\n    },\n\n    play() {\n      this.audio.play();\n    },\n\n    progressBarUpdate(event) {\n      if (this.audio) {\n        const { audio } = this;\n        audio.currentTime = (event.target.value * audio.duration) / 100;\n      }\n    },\n\n    async srcToBars(src) {\n      window.AudioContext = window.AudioContext || window.webkitAudioContext;\n      const audioContext = new AudioContext();\n\n      const response = await fetch(src);\n      const arrayBuffer = await response.arrayBuffer();\n      const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);\n\n      return normalizeData(filterData(audioBuffer));\n    },\n\n    numberToTimeString(time) {\n      const { isRecording } = this;\n\n      function formatNumber(number, decimals = 2) {\n        return number.toString().padStart(decimals, '0');\n      }\n\n      const minutes = formatNumber(Math.floor(time / 60), isRecording ? 2 : 1);\n      const seconds = formatNumber(Math.round(time % 60));\n      const millisecondsFormatted = formatNumber(this.mockMilliseconds);\n\n      return `${minutes}:${seconds}${isRecording ? `:${millisecondsFormatted}` : ''}`;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../assets/scss/unnnic.scss\";\n\n.unnnic-audio-recorder {\n  position: relative;\n\n  border-radius: $unnnic-border-radius-sm;\n\n  display: inline-flex;\n  align-items: center;\n\n  width: 100%;\n\n  ::v-deep .audio-player__time, ::v-deep .audio-handler__time {\n    font-family: $unnnic-font-family-secondary;\n    font-weight: $unnnic-font-weight-regular;\n    font-size: $unnnic-font-size-body-md;\n    line-height: $unnnic-font-size-body-md + $unnnic-line-height-md;\n    color: $unnnic-color-neutral-darkest;\n    user-select: none;\n  }\n\n  .delete-button {\n    margin-right: $unnnic-spacing-inline-xs;\n  }\n}\n</style>\n","export default \"__VITE_ASSET__5d29bb1d__\""],"names":["_sfc_main","UnnnicIcon","UnnnicToolTip","_hoisted_1","_hoisted_2","_openBlock","_createElementBlock","_createElementVNode","_toDisplayString","$props","_createVNode","_component_unnnic_icon","_component_unnnic_tool_tip","$options","args","status","event","index","statusMapping","newValue","_hoisted_4","_normalizeClass","$data","$event","_hoisted_3","_Fragment","_renderList","bar","filterData","audioBuffer","rawData","samples","blockSize","filteredData","i","blockStart","sum","j","normalizeData","multiplier","n","AudioHandler","AudioPlayer","blob","src","track","setDuration","recordTimeSliceInMilliseconds","audio","audioContext","arrayBuffer","time","isRecording","formatNumber","number","decimals","minutes","seconds","millisecondsFormatted","_createBlock","_component_audio_handler","_ctx","_component_audio_player","AudioSample"],"mappings":"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"}