{"version":3,"file":"ChartLine.stories-8b8ca8f1.js","sources":["../../src/components/ChartLine/ChartLine.vue"],"sourcesContent":["<template>\r\n  <div :class=\"['unnnic-chart-line', { condensed }]\">\r\n    <div v-if=\"title\" class=\"header\">\r\n      <div class=\"title unnnic-font secondary body-lg color-neutral-dark\">{{ title }}</div>\r\n    </div>\r\n\r\n    <div class=\"main\">\r\n      <div class=\"reference\">\r\n        <div class=\"values\">\r\n          <div\r\n            v-for=\"(value, index) in [value(maxValue), value(maxValue / 2), value(0)]\"\r\n            :key=\"index\"\r\n            class=\"value unnnic-font secondary body-md color-neutral-cleanest\"\r\n          >\r\n            {{ value }}\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"unnnic-font secondary body-md color-neutral-cleanest\">&nbsp;</div>\r\n      </div>\r\n\r\n      <div class=\"groups\">\r\n        <div class=\"chart\" :style=\"{ backgroundImage: svgChart }\" ref=\"chart\">\r\n          <div v-for=\"({ value }, index) in data\" :key=\"index\" class=\"group\">\r\n            <unnnic-tool-tip\r\n              enabled\r\n              :text=\"String(value)\"\r\n              side=\"top\"\r\n              :style=\"{ height: `${(value / maxValue) * 100}%`, width: '100%' }\"\r\n            >\r\n              <div class=\"bar\"></div>\r\n            </unnnic-tool-tip>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"titles\">\r\n          <div\r\n            v-for=\"({ title }, index) in data\"\r\n            :key=\"index\"\r\n            class=\"title unnnic-font secondary body-md color-neutral-cleanest\"\r\n          >\r\n            {{ title }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport UnnnicToolTip from '../ToolTip/ToolTip.vue';\r\n\r\nexport default {\r\n  components: {\r\n    UnnnicToolTip,\r\n  },\r\n\r\n  props: {\r\n    condensed: Boolean,\r\n    fixedMaxValue: Number,\r\n    data: Array,\r\n    title: String,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      chartContainerWidthInterval: null,\r\n      chartContainerWidth: 0,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.chartContainerWidth = this.$refs.chart.offsetWidth;\r\n\r\n    this.chartContainerWidthInterval = setInterval(() => {\r\n      this.chartContainerWidth = this.$refs.chart.offsetWidth;\r\n    }, 100);\r\n  },\r\n\r\n  beforeUnmount() {\r\n    if (this.chartContainerWidthInterval) {\r\n      clearInterval(this.chartContainerWidthInterval);\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    maxValue() {\r\n      return this.fixedMaxValue || Math.max(\r\n        ...this.data\r\n          .map(({ value }) => value)\r\n          .flat(),\r\n      );\r\n    },\r\n\r\n    svgChart() {\r\n      const bars = this.data\r\n        .map(\r\n          ({ value }) => 50\r\n            - (122 / 200)\r\n            - ((value / this.maxValue) * (50 - (122 / 100)) + Math.random() * 0.01),\r\n        );\r\n\r\n      const barWidth = 100 / bars.length;\r\n      const halfBar = barWidth / 2;\r\n\r\n      let path = '';\r\n\r\n      path += `L ${barWidth / 2} ${bars[0]}`;\r\n\r\n      let x = 0;\r\n\r\n      for (let i = 1; i < bars.length; i += 1) {\r\n        if (i === 1) {\r\n          x = barWidth * 1.5;\r\n        } else {\r\n          x += barWidth;\r\n        }\r\n\r\n        path += `C ${x - halfBar} ${bars[i - 1]} ${x - halfBar} ${bars[i]} ${x} ${bars[i]}`;\r\n      }\r\n\r\n      if (bars.length <= 1) {\r\n        x += barWidth / 2;\r\n      }\r\n\r\n      path += `L ${x + halfBar} ${bars[bars.length - 1]}`;\r\n\r\n      const svg = `\r\n        <svg xmlns='http://www.w3.org/2000/svg' viewBox=\"0 0 100 50\" width=\"100%\" height=\"100%\">\r\n          <defs>\r\n            <linearGradient id=\"linear\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n              <stop offset=\"0%\" stop-color=\"#DE16BA\" stop-opacity=\"1\" />\r\n              <stop offset=\"50%\" stop-color=\"#DE16BA\" stop-opacity=\"0.4\" />\r\n              <stop offset=\"100%\" stop-color=\"#2856FC\" stop-opacity=\"1.0\" />\r\n            </linearGradient>\r\n\r\n            <linearGradient id=\"linear1\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n              <stop offset=\"0%\" stop-color=\"#DE16BA\" stop-opacity=\"0.16\" />\r\n              <stop offset=\"50%\" stop-color=\"#2856FC\" stop-opacity=\"0.16\" />\r\n            </linearGradient>\r\n          </defs>\r\n\r\n          <g style=\"transform: scaleX(${this.chartContainerWidth / ((122 / 50) * 100)}); transform-origin: center;\">\r\n            <path fill=\"url(#linear1)\" d=\"M0 50 L0 ${String(bars[0]) + path} L100 50Z\" />\r\n            <path fill=\"none\" stroke-width=\"2\" stroke-linecap=\"round\" vector-effect=\"non-scaling-stroke\" stroke=\"url(#linear)\" d=\"M0 ${String(bars[0]) + path}\" />\r\n          </g>\r\n        </svg>\r\n      `;\r\n\r\n      return `url(\"data:image/svg+xml,${encodeURIComponent(svg)}\")`;\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    value(value) {\r\n      if (this.maxValue <= 1) {\r\n        return value.toFixed(1);\r\n      }\r\n\r\n      return String(Math.ceil(value));\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../../assets/scss/unnnic.scss\";\r\n\r\n.unnnic-chart-line {\r\n  background-color: $unnnic-color-background-snow;\r\n  border-radius: $unnnic-border-radius-md;\r\n  padding: $unnnic-spacing-inset-md;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: column;\r\n  row-gap: $unnnic-spacing-stack-nano;\r\n  outline-style: solid;\r\n  outline-color: $unnnic-color-neutral-soft;\r\n  outline-width: $unnnic-border-width-thinner;\r\n  outline-offset: -$unnnic-border-width-thinner;\r\n\r\n  &.condensed {\r\n    padding: $unnnic-spacing-inset-sm;\r\n\r\n    .main .reference {\r\n      margin-right: $unnnic-spacing-inline-sm;\r\n    }\r\n  }\r\n\r\n  .main {\r\n    height: 9.125 * $unnnic-font-size;\r\n    display: flex;\r\n    justify-content: center;\r\n\r\n    .reference {\r\n      display: flex;\r\n      flex-direction: column;\r\n      row-gap: $unnnic-spacing-stack-nano;\r\n      margin-right: $unnnic-spacing-inline-md;\r\n\r\n      .values {\r\n        flex: 1;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-between;\r\n        text-align: right;\r\n      }\r\n    }\r\n\r\n    .groups {\r\n      display: flex;\r\n      flex: 1;\r\n      flex-direction: column;\r\n      row-gap: $unnnic-spacing-stack-nano;\r\n\r\n      .chart {\r\n        background-size: 100% 100%;\r\n        flex: 1;\r\n        display: flex;\r\n\r\n        .group {\r\n          flex: 1;\r\n          display: flex;\r\n          flex-direction: column;\r\n          row-gap: $unnnic-spacing-stack-nano;\r\n          justify-content: flex-end;\r\n        }\r\n\r\n        .unnnic-tooltip:hover .bar {\r\n          width: 0;\r\n          height: 100%;\r\n          border-left: 1px dashed $unnnic-color-neutral-dark;\r\n          margin: 0 auto;\r\n        }\r\n      }\r\n\r\n      .titles {\r\n        display: flex;\r\n\r\n        .title {\r\n          flex: 1;\r\n          text-align: center;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n@each $name, $color in $scheme-colors {\r\n  .color-#{$name} {\r\n    color: $color;\r\n  }\r\n\r\n  .bg-#{$name} {\r\n    background-color: $color;\r\n  }\r\n}\r\n\r\n.unnnic-font {\r\n  font-weight: $unnnic-font-weight-regular;\r\n  font-family: $unnnic-font-family-primary;\r\n\r\n  $font-sizes:\r\n    \"body-sm\" $unnnic-font-size-body-sm,\r\n    \"body-md\" $unnnic-font-size-body-md,\r\n    \"body-gt\" $unnnic-font-size-body-gt,\r\n    \"body-lg\" $unnnic-font-size-body-lg,\r\n\r\n    \"title-sm\" $unnnic-font-size-title-sm,\r\n    \"title-md\" $unnnic-font-size-title-md,\r\n    \"title-lg\" $unnnic-font-size-title-lg,\r\n\r\n    \"h4\" $unnnic-font-size-h4,\r\n    \"h3\" $unnnic-font-size-h3,\r\n    \"h2\" $unnnic-font-size-h2,\r\n    \"h1\" $unnnic-font-size-h1;\r\n\r\n  $font-weights:\r\n    \"black\" $unnnic-font-weight-black,\r\n    \"bold\" $unnnic-font-weight-bold,\r\n    \"light\" $unnnic-font-weight-light;\r\n\r\n  &.secondary {\r\n    font-family: $unnnic-font-family-secondary;\r\n  }\r\n\r\n  @each $name, $size in $font-sizes {\r\n    &.#{$name} {\r\n      font-size: $size;\r\n      line-height: $size + $unnnic-line-height-md;\r\n    }\r\n  }\r\n\r\n  @each $name, $weight in $font-weights {\r\n    &.#{$name} {\r\n      font-weight: $weight;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":["_sfc_main","UnnnicToolTip","value","bars","barWidth","halfBar","path","x","i","svg","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_withScopeId","_createElementVNode","_hoisted_7","_hoisted_9","_createElementBlock","$props","_openBlock","_hoisted_1","_toDisplayString","_Fragment","_renderList","$options","index","_createVNode","_component_unnnic_tool_tip","_normalizeStyle","_hoisted_8","title"],"mappings":"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"}